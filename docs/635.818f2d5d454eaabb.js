"use strict";(self.webpackChunkFrontend=self.webpackChunkFrontend||[]).push([[635],{4635:(Bo,wt,p)=>{p.r(wt),p.d(wt,{AdminModule:()=>Fo});var nt={};p.r(nt),p.d(nt,{Decoder:()=>ft,Encoder:()=>ti,PacketType:()=>g,protocol:()=>Ke});var k=p(6814),S=p(1896),u=p(7700),t=p(5879);function ge(i,o){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"img",1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("src",e.data.qrCode,t.LSH)}}let me=(()=>{class i{constructor(e){this.data=e}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(u.WI))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-qr-display"]],decls:1,vars:1,consts:[[4,"ngIf"],["alt","QR Code",3,"src"]],template:function(n,s){1&n&&t.YNc(0,ge,2,1,"div",0),2&n&&t.Q6J("ngIf",s.data.qrCode)},dependencies:[k.O5]})}return i})();const Z=Object.create(null);Z.open="0",Z.close="1",Z.ping="2",Z.pong="3",Z.message="4",Z.upgrade="5",Z.noop="6";const Q=Object.create(null);Object.keys(Z).forEach(i=>{Q[Z[i]]=i});const ot={type:"error",data:"parser error"},kt="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),xt="function"==typeof ArrayBuffer,At=i=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,st=({type:i,data:o},e,n)=>kt&&o instanceof Blob?e?n(o):Et(o,n):xt&&(o instanceof ArrayBuffer||At(o))?e?n(o):Et(new Blob([o]),n):n(Z[i]+(o||"")),Et=(i,o)=>{const e=new FileReader;return e.onload=function(){const n=e.result.split(",")[1];o("b"+(n||""))},e.readAsDataURL(i)};function Zt(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}let rt;const B=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<64;i++)B["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(i)]=i;const be="function"==typeof ArrayBuffer,at=(i,o)=>{if("string"!=typeof i)return{type:"message",data:zt(i,o)};const e=i.charAt(0);return"b"===e?{type:"message",data:ye(i.substring(1),o)}:Q[e]?i.length>1?{type:Q[e],data:i.substring(1)}:{type:Q[e]}:ot},ye=(i,o)=>{if(be){const e=(i=>{let n,r,a,h,d,o=.75*i.length,e=i.length,s=0;"="===i[i.length-1]&&(o--,"="===i[i.length-2]&&o--);const m=new ArrayBuffer(o),y=new Uint8Array(m);for(n=0;n<e;n+=4)r=B[i.charCodeAt(n)],a=B[i.charCodeAt(n+1)],h=B[i.charCodeAt(n+2)],d=B[i.charCodeAt(n+3)],y[s++]=r<<2|a>>4,y[s++]=(15&a)<<4|h>>2,y[s++]=(3&h)<<6|63&d;return m})(i);return zt(e,o)}return{base64:!0,data:i}},zt=(i,o)=>"blob"===o?i instanceof Blob?i:new Blob([i]):i instanceof ArrayBuffer?i:i.buffer,Ot=String.fromCharCode(30);let ct;function G(i){return i.reduce((o,e)=>o+e.length,0)}function H(i,o){if(i[0].length===o)return i.shift();const e=new Uint8Array(o);let n=0;for(let s=0;s<o;s++)e[s]=i[0][n++],n===i[0].length&&(i.shift(),n=0);return i.length&&n<i[0].length&&(i[0]=i[0].slice(n)),e}function _(i){if(i)return function we(i){for(var o in _.prototype)i[o]=_.prototype[o];return i}(i)}_.prototype.on=_.prototype.addEventListener=function(i,o){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(o),this},_.prototype.once=function(i,o){function e(){this.off(i,e),o.apply(this,arguments)}return e.fn=o,this.on(i,e),this},_.prototype.off=_.prototype.removeListener=_.prototype.removeAllListeners=_.prototype.removeEventListener=function(i,o){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var e=this._callbacks["$"+i];if(!e)return this;if(1==arguments.length)return delete this._callbacks["$"+i],this;for(var n,s=0;s<e.length;s++)if((n=e[s])===o||n.fn===o){e.splice(s,1);break}return 0===e.length&&delete this._callbacks["$"+i],this},_.prototype.emitReserved=_.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var o=new Array(arguments.length-1),e=this._callbacks["$"+i],n=1;n<arguments.length;n++)o[n-1]=arguments[n];if(e){n=0;for(var s=(e=e.slice(0)).length;n<s;++n)e[n].apply(this,o)}return this},_.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},_.prototype.hasListeners=function(i){return!!this.listeners(i).length};const x=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function It(i,...o){return o.reduce((e,n)=>(i.hasOwnProperty(n)&&(e[n]=i[n]),e),{})}const ke=x.setTimeout,xe=x.clearTimeout;function W(i,o){o.useNativeTimers?(i.setTimeoutFn=ke.bind(x),i.clearTimeoutFn=xe.bind(x)):(i.setTimeoutFn=x.setTimeout.bind(x),i.clearTimeoutFn=x.clearTimeout.bind(x))}function Ee(i){return"string"==typeof i?function Ze(i){let o=0,e=0;for(let n=0,s=i.length;n<s;n++)o=i.charCodeAt(n),o<128?e+=1:o<2048?e+=2:o<55296||o>=57344?e+=3:(n++,e+=4);return e}(i):Math.ceil(1.33*(i.byteLength||i.size))}class De extends Error{constructor(o,e,n){super(o),this.description=e,this.context=n,this.type="TransportError"}}class lt extends _{constructor(o){super(),this.writable=!1,W(this,o),this.opts=o,this.query=o.query,this.socket=o.socket}onError(o,e,n){return super.emitReserved("error",new De(o,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(o){"open"===this.readyState&&this.write(o)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(o){const e=at(o,this.socket.binaryType);this.onPacket(e)}onPacket(o){super.emitReserved("packet",o)}onClose(o){this.readyState="closed",super.emitReserved("close",o)}pause(o){}createUri(o,e={}){return o+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const o=this.opts.hostname;return-1===o.indexOf(":")?o:"["+o+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(o){const e=function ze(i){let o="";for(let e in i)i.hasOwnProperty(e)&&(o.length&&(o+="&"),o+=encodeURIComponent(e)+"="+encodeURIComponent(i[e]));return o}(o);return e.length?"?"+e:""}}const Lt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),X=64,Rt={};let Ut,Nt=0,I=0;function St(i){let o="";do{o=Lt[i%X]+o,i=Math.floor(i/X)}while(i>0);return o}function qt(){const i=St(+new Date);return i!==Ut?(Nt=0,Ut=i):i+"."+St(Nt++)}for(;I<X;I++)Rt[Lt[I]]=I;let Pt=!1;try{Pt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ie=Pt;function Ft(i){const o=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!o||Ie))return new XMLHttpRequest}catch{}if(!o)try{return new(x[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}function Le(){}const Re=null!=new Ft({xdomain:!1}).responseType;let $=(()=>{class i extends _{constructor(e,n){super(),W(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=void 0!==n.data?n.data:null,this.create()}create(){var e;const n=It(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const s=this.xhr=new Ft(n);try{s.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&s.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if("POST"===this.method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{var r;3===s.readyState&&(null===(r=this.opts.cookieJar)||void 0===r||r.parseCookies(s)),4===s.readyState&&(200===s.status||1223===s.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof s.status?s.status:0)},0))},s.send(this.data)}catch(r){return void this.setTimeoutFn(()=>{this.onError(r)},0)}typeof document<"u"&&(this.index=i.requestsCount++,i.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||null===this.xhr)){if(this.xhr.onreadystatechange=Le,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete i.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return i.requestsCount=0,i.requests={},i})();function Bt(){for(let i in $.requests)$.requests.hasOwnProperty(i)&&$.requests[i].abort()}typeof document<"u"&&("function"==typeof attachEvent?attachEvent("onunload",Bt):"function"==typeof addEventListener&&addEventListener("onpagehide"in x?"pagehide":"unload",Bt,!1));const ht="function"==typeof Promise&&"function"==typeof Promise.resolve?o=>Promise.resolve().then(o):(o,e)=>e(o,0),K=x.WebSocket||x.MozWebSocket,Yt=typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Pe={websocket:class Se extends lt{constructor(o){super(o),this.supportsBinary=!o.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const o=this.uri(),e=this.opts.protocols,n=Yt?{}:It(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Yt?new K(o,e,n):e?new K(o,e):new K(o)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=o=>this.onClose({description:"websocket connection closed",context:o}),this.ws.onmessage=o=>this.onData(o.data),this.ws.onerror=o=>this.onError("websocket error",o)}write(o){this.writable=!1;for(let e=0;e<o.length;e++){const s=e===o.length-1;st(o[e],this.supportsBinary,r=>{try{this.ws.send(r)}catch{}s&&ht(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const o=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=qt()),this.supportsBinary||(e.b64=1),this.createUri(o,e)}check(){return!!K}},webtransport:class qe extends lt{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(o=>{this.onError("webtransport error",o)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(o=>{const e=function Te(i,o){ct||(ct=new TextDecoder);const e=[];let n=0,s=-1,r=!1;return new TransformStream({transform(a,h){for(e.push(a);;){if(0===n){if(G(e)<1)break;const d=H(e,1);r=128==(128&d[0]),s=127&d[0],n=s<126?3:126===s?1:2}else if(1===n){if(G(e)<2)break;const d=H(e,2);s=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),n=3}else if(2===n){if(G(e)<8)break;const d=H(e,8),m=new DataView(d.buffer,d.byteOffset,d.length),y=m.getUint32(0);if(y>Math.pow(2,21)-1){h.enqueue(ot);break}s=y*Math.pow(2,32)+m.getUint32(4),n=3}else{if(G(e)<s)break;const d=H(e,s);h.enqueue(at(r?d:ct.decode(d),o)),n=0}if(0===s||s>i){h.enqueue(ot);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=o.readable.pipeThrough(e).getReader(),s=function Me(){return new TransformStream({transform(i,o){!function fe(i,o){kt&&i.data instanceof Blob?i.data.arrayBuffer().then(Zt).then(o):xt&&(i.data instanceof ArrayBuffer||At(i.data))?o(Zt(i.data)):st(i,!1,e=>{rt||(rt=new TextEncoder),o(rt.encode(e))})}(i,e=>{const n=e.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const r=new DataView(s.buffer);r.setUint8(0,126),r.setUint16(1,n)}else{s=new Uint8Array(9);const r=new DataView(s.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(n))}i.data&&"string"!=typeof i.data&&(s[0]|=128),o.enqueue(s),o.enqueue(e)})}})}();s.readable.pipeTo(o.writable),this.writer=s.writable.getWriter();const r=()=>{n.read().then(({done:h,value:d})=>{h||(this.onPacket(d),r())}).catch(h=>{})};r();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this.writer.write(a).then(()=>this.onOpen())})}))}write(o){this.writable=!1;for(let e=0;e<o.length;e++){const s=e===o.length-1;this.writer.write(o[e]).then(()=>{s&&ht(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var o;null===(o=this.transport)||void 0===o||o.close()}},polling:class Ne extends lt{constructor(o){if(super(o),this.polling=!1,typeof location<"u"){const n="https:"===location.protocol;let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&o.hostname!==location.hostname||s!==o.port}this.supportsBinary=Re&&!(o&&o.forceBase64),this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(o){this.readyState="pausing";const e=()=>{this.readyState="paused",o()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(o){((i,o)=>{const e=i.split(Ot),n=[];for(let s=0;s<e.length;s++){const r=at(e[s],o);if(n.push(r),"error"===r.type)break}return n})(o,this.socket.binaryType).forEach(n=>{if("opening"===this.readyState&&"open"===n.type&&this.onOpen(),"close"===n.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const o=()=>{this.write([{type:"close"}])};"open"===this.readyState?o():this.once("open",o)}write(o){this.writable=!1,((i,o)=>{const e=i.length,n=new Array(e);let s=0;i.forEach((r,a)=>{st(r,!1,h=>{n[a]=h,++s===e&&o(n.join(Ot))})})})(o,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const o=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=qt()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(o,e)}request(o={}){return Object.assign(o,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new $(this.uri(),o)}doWrite(o,e){const n=this.request({method:"POST",data:o});n.on("success",e),n.on("error",(s,r)=>{this.onError("xhr post error",s,r)})}doPoll(){const o=this.request();o.on("data",this.onData.bind(this)),o.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=o}}},Fe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Be=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pt(i){if(i.length>2e3)throw"URI too long";const o=i,e=i.indexOf("["),n=i.indexOf("]");-1!=e&&-1!=n&&(i=i.substring(0,e)+i.substring(e,n).replace(/:/g,";")+i.substring(n,i.length));let s=Fe.exec(i||""),r={},a=14;for(;a--;)r[Be[a]]=s[a]||"";return-1!=e&&-1!=n&&(r.source=o,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function Ye(i,o){const n=o.replace(/\/{2,9}/g,"/").split("/");return("/"==o.slice(0,1)||0===o.length)&&n.splice(0,1),"/"==o.slice(-1)&&n.splice(n.length-1,1),n}(0,r.path),r.queryKey=function je(i,o){const e={};return o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,r){s&&(e[s]=r)}),e}(0,r.query),r}let jt=(()=>{class i extends _{constructor(e,n={}){super(),this.binaryType="arraybuffer",this.writeBuffer=[],e&&"object"==typeof e&&(n=e,e=null),e?(e=pt(e),n.hostname=e.host,n.secure="https"===e.protocol||"wss"===e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=pt(n.host).host),W(this,n),this.secure=null!=n.secure?n.secure:typeof location<"u"&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function Oe(i){let o={},e=i.split("&");for(let n=0,s=e.length;n<s;n++){let r=e[n].split("=");o[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return o}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=4,n.transport=e,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new Pe[e](s)}open(){let e;if(this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch{return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),s=!1;i.priorWebsocketSuccess=!1;const r=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",D=>{if(!s)if("pong"===D.type&&"probe"===D.data){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;i.priorWebsocketSuccess="websocket"===n.name,this.transport.pause(()=>{s||"closed"!==this.readyState&&(V(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const L=new Error("probe error");L.transport=n.name,this.emitReserved("upgradeError",L)}}))};function a(){s||(s=!0,V(),n.close(),n=null)}const h=D=>{const L=new Error("probe error: "+D);L.transport=n.name,a(),this.emitReserved("upgradeError",L)};function d(){h("transport closed")}function m(){h("socket closed")}function y(D){n&&D.name!==n.name&&a()}const V=()=>{n.removeListener("open",r),n.removeListener("error",h),n.removeListener("close",d),this.off("close",m),this.off("upgrading",y)};n.once("open",r),n.once("error",h),n.once("close",d),this.once("close",m),this.once("upgrading",y),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onOpen(){if(this.readyState="open",i.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const r=this.writeBuffer[s].data;if(r&&(n+=Ee(r)),s>0&&n>this.maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}write(e,n,s){return this.sendPacket("message",e,n,s),this}send(e,n,s){return this.sendPacket("message",e,n,s),this}sendPacket(e,n,s,r){if("function"==typeof n&&(r=n,n=void 0),"function"==typeof s&&(r=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const a={type:e,data:n,options:s};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}onError(e){i.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let s=0;const r=e.length;for(;s<r;s++)~this.transports.indexOf(e[s])&&n.push(e[s]);return n}}return i.protocol=4,i})();const Ve="function"==typeof ArrayBuffer,Qe=i=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,Jt=Object.prototype.toString,Ge="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Jt.call(Blob),He="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===Jt.call(File);function ut(i){return Ve&&(i instanceof ArrayBuffer||Qe(i))||Ge&&i instanceof Blob||He&&i instanceof File}function tt(i,o){if(!i||"object"!=typeof i)return!1;if(Array.isArray(i)){for(let e=0,n=i.length;e<n;e++)if(tt(i[e]))return!0;return!1}if(ut(i))return!0;if(i.toJSON&&"function"==typeof i.toJSON&&1===arguments.length)return tt(i.toJSON(),!0);for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)&&tt(i[e]))return!0;return!1}function We(i){const o=[],n=i;return n.data=gt(i.data,o),n.attachments=o.length,{packet:n,buffers:o}}function gt(i,o){if(!i)return i;if(ut(i)){const e={_placeholder:!0,num:o.length};return o.push(i),e}if(Array.isArray(i)){const e=new Array(i.length);for(let n=0;n<i.length;n++)e[n]=gt(i[n],o);return e}if("object"==typeof i&&!(i instanceof Date)){const e={};for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=gt(i[n],o));return e}return i}function Xe(i,o){return i.data=mt(i.data,o),delete i.attachments,i}function mt(i,o){if(!i)return i;if(i&&!0===i._placeholder){if("number"==typeof i.num&&i.num>=0&&i.num<o.length)return o[i.num];throw new Error("illegal attachments")}if(Array.isArray(i))for(let e=0;e<i.length;e++)i[e]=mt(i[e],o);else if("object"==typeof i)for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e]=mt(i[e],o));return i}const $e=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ke=5;var g=function(i){return i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",i}(g||{});class ti{constructor(o){this.replacer=o}encode(o){return o.type!==g.EVENT&&o.type!==g.ACK||!tt(o)?[this.encodeAsString(o)]:this.encodeAsBinary({type:o.type===g.EVENT?g.BINARY_EVENT:g.BINARY_ACK,nsp:o.nsp,data:o.data,id:o.id})}encodeAsString(o){let e=""+o.type;return(o.type===g.BINARY_EVENT||o.type===g.BINARY_ACK)&&(e+=o.attachments+"-"),o.nsp&&"/"!==o.nsp&&(e+=o.nsp+","),null!=o.id&&(e+=o.id),null!=o.data&&(e+=JSON.stringify(o.data,this.replacer)),e}encodeAsBinary(o){const e=We(o),n=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(n),s}}function Vt(i){return"[object Object]"===Object.prototype.toString.call(i)}class ft extends _{constructor(o){super(),this.reviver=o}add(o){let e;if("string"==typeof o){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(o);const n=e.type===g.BINARY_EVENT;n||e.type===g.BINARY_ACK?(e.type=n?g.EVENT:g.ACK,this.reconstructor=new ei(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else{if(!ut(o)&&!o.base64)throw new Error("Unknown type: "+o);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(o),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(o){let e=0;const n={type:Number(o.charAt(0))};if(void 0===g[n.type])throw new Error("unknown packet type "+n.type);if(n.type===g.BINARY_EVENT||n.type===g.BINARY_ACK){const r=e+1;for(;"-"!==o.charAt(++e)&&e!=o.length;);const a=o.substring(r,e);if(a!=Number(a)||"-"!==o.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(a)}if("/"===o.charAt(e+1)){const r=e+1;for(;++e&&","!==o.charAt(e)&&e!==o.length;);n.nsp=o.substring(r,e)}else n.nsp="/";const s=o.charAt(e+1);if(""!==s&&Number(s)==s){const r=e+1;for(;++e;){const a=o.charAt(e);if(null==a||Number(a)!=a){--e;break}if(e===o.length)break}n.id=Number(o.substring(r,e+1))}if(o.charAt(++e)){const r=this.tryParse(o.substr(e));if(!ft.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(o){try{return JSON.parse(o,this.reviver)}catch{return!1}}static isPayloadValid(o,e){switch(o){case g.CONNECT:return Vt(e);case g.DISCONNECT:return void 0===e;case g.CONNECT_ERROR:return"string"==typeof e||Vt(e);case g.EVENT:case g.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===$e.indexOf(e[0]));case g.ACK:case g.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ei{constructor(o){this.packet=o,this.buffers=[],this.reconPack=o}takeBinaryData(o){if(this.buffers.push(o),this.buffers.length===this.reconPack.attachments){const e=Xe(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function A(i,o,e){return i.on(o,e),function(){i.off(o,e)}}const ii=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Qt extends _{constructor(o,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=o,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const o=this.io;this.subs=[A(o,"open",this.onopen.bind(this)),A(o,"packet",this.onpacket.bind(this)),A(o,"error",this.onerror.bind(this)),A(o,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...o){return o.unshift("message"),this.emit.apply(this,o),this}emit(o,...e){if(ii.hasOwnProperty(o))throw new Error('"'+o.toString()+'" is a reserved event name');if(e.unshift(o),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const n={type:g.EVENT,data:e,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const a=this.ids++,h=e.pop();this._registerAckCallback(a,h),n.id=a}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(o,e){var n;const s=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===s)return void(this.acks[o]=e);const r=this.io.setTimeoutFn(()=>{delete this.acks[o];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===o&&this.sendBuffer.splice(h,1);e.call(this,new Error("operation has timed out"))},s),a=(...h)=>{this.io.clearTimeoutFn(r),e.apply(this,h)};a.withError=!0,this.acks[o]=a}emitWithAck(o,...e){return new Promise((n,s)=>{const r=(a,h)=>a?s(a):n(h);r.withError=!0,e.push(r),this.emit(o,...e)})}_addToQueue(o){let e;"function"==typeof o[o.length-1]&&(e=o.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:o,flags:Object.assign({fromQueue:!0},this.flags)};o.push((s,...r)=>n!==this._queue[0]?void 0:(null!==s?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(s)):(this._queue.shift(),e&&e(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(o=!1){if(!this.connected||0===this._queue.length)return;const e=this._queue[0];e.pending&&!o||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(o){o.nsp=this.nsp,this.io._packet(o)}onopen(){"function"==typeof this.auth?this.auth(o=>{this._sendConnectPacket(o)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(o){this.packet({type:g.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},o):o})}onerror(o){this.connected||this.emitReserved("connect_error",o)}onclose(o,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",o,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(o=>{if(!this.sendBuffer.some(n=>String(n.id)===o)){const n=this.acks[o];delete this.acks[o],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(o){if(o.nsp===this.nsp)switch(o.type){case g.CONNECT:o.data&&o.data.sid?this.onconnect(o.data.sid,o.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case g.EVENT:case g.BINARY_EVENT:this.onevent(o);break;case g.ACK:case g.BINARY_ACK:this.onack(o);break;case g.DISCONNECT:this.ondisconnect();break;case g.CONNECT_ERROR:this.destroy();const n=new Error(o.data.message);n.data=o.data.data,this.emitReserved("connect_error",n)}}onevent(o){const e=o.data||[];null!=o.id&&e.push(this.ack(o.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(o){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,o)}super.emit.apply(this,o),this._pid&&o.length&&"string"==typeof o[o.length-1]&&(this._lastOffset=o[o.length-1])}ack(o){const e=this;let n=!1;return function(...s){n||(n=!0,e.packet({type:g.ACK,id:o,data:s}))}}onack(o){const e=this.acks[o.id];"function"==typeof e&&(delete this.acks[o.id],e.withError&&o.data.unshift(null),e.apply(this,o.data))}onconnect(o,e){this.id=o,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(o=>this.emitEvent(o)),this.receiveBuffer=[],this.sendBuffer.forEach(o=>{this.notifyOutgoingListeners(o),this.packet(o)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(o=>o()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:g.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(o){return this.flags.compress=o,this}get volatile(){return this.flags.volatile=!0,this}timeout(o){return this.flags.timeout=o,this}onAny(o){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(o),this}prependAny(o){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(o),this}offAny(o){if(!this._anyListeners)return this;if(o){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(o===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(o){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(o),this}prependAnyOutgoing(o){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(o),this}offAnyOutgoing(o){if(!this._anyOutgoingListeners)return this;if(o){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(o===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(o){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,o.data)}}}function P(i){this.ms=(i=i||{}).min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}P.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),e=Math.floor(o*this.jitter*i);i=1&Math.floor(10*o)?i+e:i-e}return 0|Math.min(i,this.max)},P.prototype.reset=function(){this.attempts=0},P.prototype.setMin=function(i){this.ms=i},P.prototype.setMax=function(i){this.max=i},P.prototype.setJitter=function(i){this.jitter=i};class _t extends _{constructor(o,e){var n;super(),this.nsps={},this.subs=[],o&&"object"==typeof o&&(e=o,o=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,W(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=e.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new P({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=o;const s=e.parser||nt;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(o){return arguments.length?(this._reconnection=!!o,this):this._reconnection}reconnectionAttempts(o){return void 0===o?this._reconnectionAttempts:(this._reconnectionAttempts=o,this)}reconnectionDelay(o){var e;return void 0===o?this._reconnectionDelay:(this._reconnectionDelay=o,null===(e=this.backoff)||void 0===e||e.setMin(o),this)}randomizationFactor(o){var e;return void 0===o?this._randomizationFactor:(this._randomizationFactor=o,null===(e=this.backoff)||void 0===e||e.setJitter(o),this)}reconnectionDelayMax(o){var e;return void 0===o?this._reconnectionDelayMax:(this._reconnectionDelayMax=o,null===(e=this.backoff)||void 0===e||e.setMax(o),this)}timeout(o){return arguments.length?(this._timeout=o,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(o){if(~this._readyState.indexOf("open"))return this;this.engine=new jt(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=A(e,"open",function(){n.onopen(),o&&o()}),r=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),o?o(h):this.maybeReconnectOnOpen()},a=A(e,"error",r);if(!1!==this._timeout){const d=this.setTimeoutFn(()=>{s(),r(new Error("timeout")),e.close()},this._timeout);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(s),this.subs.push(a),this}connect(o){return this.open(o)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const o=this.engine;this.subs.push(A(o,"ping",this.onping.bind(this)),A(o,"data",this.ondata.bind(this)),A(o,"error",this.onerror.bind(this)),A(o,"close",this.onclose.bind(this)),A(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(o){try{this.decoder.add(o)}catch(e){this.onclose("parse error",e)}}ondecoded(o){ht(()=>{this.emitReserved("packet",o)},this.setTimeoutFn)}onerror(o){this.emitReserved("error",o)}socket(o,e){let n=this.nsps[o];return n?this._autoConnect&&!n.active&&n.connect():(n=new Qt(this,o,e),this.nsps[o]=n),n}_destroy(o){const e=Object.keys(this.nsps);for(const n of e)if(this.nsps[n].active)return;this._close()}_packet(o){const e=this.encoder.encode(o);for(let n=0;n<e.length;n++)this.engine.write(e[n],o.options)}cleanup(){this.subs.forEach(o=>o()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(o,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",o,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const o=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{o.skipReconnect||(this.emitReserved("reconnect_attempt",o.backoff.attempts),!o.skipReconnect&&o.open(s=>{s?(o._reconnecting=!1,o.reconnect(),this.emitReserved("reconnect_error",s)):o.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const o=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",o)}}const Y={};function et(i,o){"object"==typeof i&&(o=i,i=void 0);const e=function Je(i,o="",e){let n=i;e=e||typeof location<"u"&&location,null==i&&(i=e.protocol+"//"+e.host),"string"==typeof i&&("/"===i.charAt(0)&&(i="/"===i.charAt(1)?e.protocol+i:e.host+i),/^(https?|wss?):\/\//.test(i)||(i=typeof e<"u"?e.protocol+"//"+i:"https://"+i),n=pt(i)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+o,n.href=n.protocol+"://"+r+(e&&e.port===n.port?"":":"+n.port),n}(i,(o=o||{}).path||"/socket.io"),n=e.source,s=e.id;let d;return o.forceNew||o["force new connection"]||!1===o.multiplex||Y[s]&&e.path in Y[s].nsps?d=new _t(n,o):(Y[s]||(Y[s]=new _t(n,o)),d=Y[s]),e.query&&!o.query&&(o.query=e.queryKey),d.socket(e.path,o)}Object.assign(et,{Manager:_t,Socket:Qt,io:et,connect:et});var Gt=p(5592),it=p(3885);let ni=(()=>{class i{constructor(e){this.Urls=e,this.connect()}connect(){this.socket=et(this.Urls.socketUrl,{reconnectionAttempts:5,reconnectionDelay:3e3}),this.socket.on("connect",()=>{console.log("Connected to WebSocket server")}),this.socket.on("reconnect",e=>{console.log(`Reconnected to WebSocket server on attempt ${e}`)}),this.socket.on("disconnect",e=>{console.log(`Disconnected from WebSocket server due to ${e}`),"io server disconnect"===e&&this.socket&&this.socket.connect()}),this.socket.on("connect_error",e=>{console.error("Connection to WebSocket server failed:",e)})}getQRCode(){return new Gt.y(e=>{this.socket&&this.socket.on("qr",n=>{e.next(n)})})}static#t=this.\u0275fac=function(n){return new(n||i)(t.LFG(it.Y))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var oi=p(1274),M=p(2296),bt=p(7988);let si=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-nav-bar"]],decls:30,vars:2,consts:[["color","primary",1,"mat-elevation-z8","bar"],[1,"example-spacer"],["mat-button","",3,"matMenuTriggerFor"],["routerLink","/admin/especies","mat-button",""],["routerLink","/admin/tipo-acoplados","mat-button",""],["routerLink","/admin/estado-viajes","mat-button",""],["routerLink","/admin/ubicacion","mat-button",""],["mnuTransportistas",""],["routerLink","/admin/transportistas","mat-menu-item",""],["mnuPolizas",""],["routerLink","/admin/crear-viaje","mat-menu-item",""],["routerLink","","mat-menu-item",""],["routerLink","/admin/viajes","mat-menu-item",""]],template:function(n,s){if(1&n&&(t.TgZ(0,"mat-toolbar",0)(1,"span"),t._uU(2,"Dmj Trucks"),t.qZA(),t._UZ(3,"span",1),t.TgZ(4,"button",2),t._uU(5,"Transportistas"),t.qZA(),t.TgZ(6,"button",2),t._uU(7,"Viajes"),t.qZA(),t.TgZ(8,"button",3),t._uU(9," Especies "),t.qZA(),t.TgZ(10,"button",4),t._uU(11," Tipo Acoplados "),t.qZA(),t.TgZ(12,"button",5),t._uU(13," Estados Viajes "),t.qZA(),t.TgZ(14,"button",6),t._uU(15,"Ubicaciones"),t.qZA(),t.TgZ(16,"mat-menu",null,7)(18,"button",8),t._uU(19,"Lista de Transportistas"),t.qZA()(),t.TgZ(20,"mat-menu",null,9)(22,"button",10),t._uU(23," Crear Viajes Comunes "),t.qZA(),t.TgZ(24,"button",11),t._uU(25," Crear Movimiento Interno "),t.qZA(),t.TgZ(26,"button",12),t._uU(27," Listar Viajes Comunes "),t.qZA(),t.TgZ(28,"button",11),t._uU(29," Listar Movimientos Internos"),t.qZA()()()),2&n){const r=t.MAs(17),a=t.MAs(21);t.xp6(4),t.Q6J("matMenuTriggerFor",r),t.xp6(2),t.Q6J("matMenuTriggerFor",a)}},dependencies:[S.rH,oi.Ye,M.lW,bt.VK,bt.OP,bt.p6],styles:[".docs-navbar-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;padding:4px 16px}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.bar[_ngcontent-%COMP%]{margin-bottom:50px}"]})}return i})(),ri=(()=>{class i{constructor(e,n,s){this.router=e,this.socketService=n,this.dialog=s}ngOnInit(){this.socketService.getQRCode().subscribe({next:e=>{this.openQRDialog(e)}})}logout(){console.log("Logout"),localStorage.removeItem("token"),this.router.navigate(["login"])}openQRDialog(e){this.dialog.open(me,{width:"300px",data:{qrCode:e}}).afterClosed().subscribe(s=>{console.log("The QR dialog was closed")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(S.F0),t.Y36(ni),t.Y36(u.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-layout"]],decls:2,vars:0,template:function(n,s){1&n&&t._UZ(0,"app-nav-bar")(1,"router-outlet")},dependencies:[S.lC,si]})}return i})();var ai=p(3519),f=p.n(ai),c=p(6223),j=p(9862);let Ht=(()=>{class i{constructor(e,n){this.http=e,this.Urls=n,this.url="",this.url=this.Urls.apiUrl}obtenerTransportistas(){return this.http.get(this.url+"/transportista")}create(e){return this.http.post(this.url+"/transportista",e)}update(e){return this.http.put(this.url+"/transportista/"+e.id,e)}static#t=this.\u0275fac=function(n){return new(n||i)(t.LFG(j.eN),t.LFG(it.Y))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var b=p(9157),z=p(2032);function ci(i,o){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," El nombre es requerido. "),t.qZA())}function li(i,o){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," El CUIT es requerido. "),t.qZA())}function hi(i,o){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Debe ingresar un email v\xe1lido. "),t.qZA())}let Wt=(()=>{class i{constructor(e,n,s,r){this.dialogRef=e,this.data=n,this.transportistaService=s,this.fb=r,this.nombre="",this.cuit=0,this.email="",this.telefono="",this.transportistaForm=this.fb.group({nombre:[this.data?this.data.nombre:"",c.kI.required],cuit:[this.data?this.data.cuit:"",c.kI.required],email:[this.data?this.data.email:"",c.kI.email],telefono:[this.data?this.data.telefono:""]})}create_or_update(){if(this.transportistaForm.valid){const e=this.transportistaForm.value;e.id=this.data?this.data.id:void 0,this.data?this.transportistaService.update(e).subscribe({next:n=>{f().fire({title:"\xc9xito",text:"Transportista actualizado con \xe9xito",icon:"success"}),this.dialogRef.close(!0)},error:n=>{console.error("Error al actualizar el transportista:",n),f().fire({title:"Error",text:"No se pudo actualizar el transportista",icon:"error"})}}):this.transportistaService.create(e).subscribe({next:n=>{f().fire({title:"\xc9xito",text:"Transportista creado con \xe9xito",icon:"success"}),this.dialogRef.close(!0)},error:n=>{console.error("Error al crear el transportista:",n),f().fire({title:"Error",text:"No se pudo crear el transportista",icon:"error"})}})}}onCancel(){this.dialogRef.close()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(u.so),t.Y36(u.WI),t.Y36(Ht),t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-modal-transportista"]],decls:28,vars:6,consts:[["mat-dialog-title",""],[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","nombre"],[4,"ngIf"],["matInput","","formControlName","cuit","type","number"],["matInput","","formControlName","email","type","email"],["matInput","","formControlName","telefono"],["align","end"],["mat-button","",3,"click"],["mat-button","","color","primary",3,"disabled","click"]],template:function(n,s){if(1&n&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"form",1)(3,"mat-dialog-content")(4,"mat-form-field",2)(5,"mat-label"),t._uU(6,"Nombre"),t.qZA(),t._UZ(7,"input",3),t.YNc(8,ci,2,0,"mat-error",4),t.qZA(),t.TgZ(9,"mat-form-field",2)(10,"mat-label"),t._uU(11,"CUIT"),t.qZA(),t._UZ(12,"input",5),t.YNc(13,li,2,0,"mat-error",4),t.qZA(),t.TgZ(14,"mat-form-field",2)(15,"mat-label"),t._uU(16,"Email"),t.qZA(),t._UZ(17,"input",6),t.YNc(18,hi,2,0,"mat-error",4),t.qZA(),t.TgZ(19,"mat-form-field",2)(20,"mat-label"),t._uU(21,"Tel\xe9fono"),t.qZA(),t._UZ(22,"input",7),t.qZA()(),t.TgZ(23,"mat-dialog-actions",8)(24,"button",9),t.NdJ("click",function(){return s.onCancel()}),t._uU(25,"Cancelar"),t.qZA(),t.TgZ(26,"button",10),t.NdJ("click",function(){return s.create_or_update()}),t._uU(27,"Guardar"),t.qZA()()()),2&n){let r,a,h;t.xp6(1),t.hij(" ",s.data?"Actualizar Transportista":"Crear Transportista","\n"),t.xp6(1),t.Q6J("formGroup",s.transportistaForm),t.xp6(6),t.Q6J("ngIf",null==(r=s.transportistaForm.get("nombre"))||null==r.errors?null:r.errors.required),t.xp6(5),t.Q6J("ngIf",null==(a=s.transportistaForm.get("cuit"))||null==a.errors?null:a.errors.required),t.xp6(5),t.Q6J("ngIf",null==(h=s.transportistaForm.get("email"))||null==h.errors?null:h.errors.required),t.xp6(8),t.Q6J("disabled",s.transportistaForm.invalid)}},dependencies:[k.O5,M.lW,u.uh,u.xY,u.H8,b.KE,b.hX,b.TO,z.Nt,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u]})}return i})();var R=p(617),l=p(5313);function di(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," ID "),t.qZA())}function pi(i,o){if(1&i&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function ui(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," Nombre "),t.qZA())}function gi(i,o){if(1&i&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.nombre," ")}}function mi(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," CUIT "),t.qZA())}function fi(i,o){if(1&i&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.cuit," ")}}function _i(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," Email "),t.qZA())}function bi(i,o){if(1&i&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.email," ")}}function yi(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," Tel\xe9fono "),t.qZA())}function Ci(i,o){if(1&i&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.telefono," ")}}function vi(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," Acciones "),t.qZA())}function Mi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",13)(1,"mat-icon",14),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.openEditModal(r))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",14),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.openTransportista(r))}),t._uU(4,"settings"),t.qZA()()}}function Ti(i,o){1&i&&t._UZ(0,"tr",15)}function wi(i,o){1&i&&t._UZ(0,"tr",16)}let ki=(()=>{class i{constructor(e,n,s){this.transportistaService=e,this.dialog=n,this.router=s,this.displayedColumns=["id","nombre","cuit","email","telefono","actions"],this.dataSource=[]}ngOnInit(){this.loadTransportistas()}loadTransportistas(){this.transportistaService.obtenerTransportistas().subscribe({next:e=>{this.dataSource=e},error:e=>{console.error("Error al cargar los transportistas:",e)}})}addNewTransportista(){this.dialog.open(Wt,{width:"350px"}).afterClosed().subscribe(n=>{!0===n&&this.loadTransportistas()})}openEditModal(e){this.dialog.open(Wt,{width:"350px",data:e}).afterClosed().subscribe(s=>{!0===s&&this.loadTransportistas()})}openTransportista(e){console.log(e),this.router.navigate(["/transportista",e.id])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(Ht),t.Y36(u.uw),t.Y36(S.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-transportistas-lista"]],decls:25,vars:3,consts:[["mat-fab","","color","primary",1,"add-button",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","cuit"],["matColumnDef","email"],["matColumnDef","telefono"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(t.TgZ(0,"div")(1,"button",0),t.NdJ("click",function(){return s.addNewTransportista()}),t.TgZ(2,"mat-icon"),t._uU(3,"add"),t.qZA()()(),t.TgZ(4,"table",1),t.ynx(5,2),t.YNc(6,di,2,0,"th",3),t.YNc(7,pi,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,ui,2,0,"th",3),t.YNc(10,gi,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,mi,2,0,"th",3),t.YNc(13,fi,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,_i,2,0,"th",3),t.YNc(16,bi,2,1,"td",4),t.BQk(),t.ynx(17,8),t.YNc(18,yi,2,0,"th",3),t.YNc(19,Ci,2,1,"td",4),t.BQk(),t.ynx(20,9),t.YNc(21,vi,2,0,"th",3),t.YNc(22,Mi,5,0,"td",4),t.BQk(),t.YNc(23,Ti,1,0,"tr",10),t.YNc(24,wi,1,0,"tr",11),t.qZA()),2&n&&(t.xp6(4),t.Q6J("dataSource",s.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},dependencies:[R.Hw,M.cs,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk],styles:[".filter-field[_ngcontent-%COMP%]{margin-right:10px}.mat-form-field[_ngcontent-%COMP%]{height:36px;line-height:normal;padding:0}.mat-input-element[_ngcontent-%COMP%]{padding:0;line-height:normal}button.mat-raised-button[_ngcontent-%COMP%]{height:36px}#filtro[_ngcontent-%COMP%]{margin-left:30px;vertical-align:text-bottom;width:150px}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:999}.mat-icon[_ngcontent-%COMP%]{margin-right:10px}"]})}return i})(),yt=(()=>{class i{constructor(e,n){this.http=e,this.Urls=n,this.endpoint="/especie",this.url=this.Urls.apiUrl}obtenerEspecies(){return this.http.get(this.url+this.endpoint)}crear(e){return this.http.post(this.url+this.endpoint,{nombre:e})}update(e){return this.http.put(this.url+this.endpoint+e.id,e)}static#t=this.\u0275fac=function(n){return new(n||i)(t.LFG(j.eN),t.LFG(it.Y))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function xi(i,o){1&i&&(t.TgZ(0,"h2",3),t._uU(1,"Crear Especie"),t.qZA())}function Ai(i,o){1&i&&(t.TgZ(0,"h2",3),t._uU(1,"Actualizar Especie"),t.qZA())}let Xt=(()=>{class i{constructor(e,n,s){this.dialogRef=e,this.data=n,this.especieService=s,this.nombre=n?n.nombre:""}create_or_update(){this.data?this.especieService.update({id:this.data.id,nombre:this.nombre}).subscribe({next:n=>{f().fire({title:"\xc9xito",text:"Especie actualizada con \xe9xito",icon:"success"}),this.dialogRef.close(!0)},error:n=>{console.log(n),f().fire({title:"Error",text:"No se pudo acutualizar la especie",icon:"error"})}}):this.especieService.crear(this.nombre).subscribe({next:e=>{f().fire({title:"\xc9xito",text:"Especie creada con \xe9xito",icon:"success"}),this.dialogRef.close(!0)},error:e=>{console.log(e),f().fire({title:"Error",text:"No se pudo crear la especie",icon:"error"})}})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(u.so),t.Y36(u.WI),t.Y36(yt))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-modal-especie"]],decls:10,vars:3,consts:[["mat-dialog-title","",4,"ngIf"],["matInput","",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["mat-dialog-title",""]],template:function(n,s){1&n&&(t.YNc(0,xi,2,0,"h2",0),t.YNc(1,Ai,2,0,"h2",0),t.TgZ(2,"mat-dialog-content")(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Especie"),t.qZA(),t.TgZ(6,"input",1),t.NdJ("ngModelChange",function(a){return s.nombre=a}),t.qZA()()(),t.TgZ(7,"mat-dialog-actions")(8,"button",2),t.NdJ("click",function(){return s.create_or_update()}),t._uU(9,"Guardar"),t.qZA()()),2&n&&(t.Q6J("ngIf",!s.data),t.xp6(1),t.Q6J("ngIf",s.data),t.xp6(5),t.Q6J("ngModel",s.nombre))},dependencies:[k.O5,M.lW,u.uh,u.xY,u.H8,b.KE,b.hX,z.Nt,c.Fj,c.JJ,c.On]})}return i})();function Ei(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," ID "),t.qZA())}function Zi(i,o){if(1&i&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function zi(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," Nombre "),t.qZA())}function Oi(i,o){if(1&i&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.nombre," ")}}function Di(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," Acciones "),t.qZA())}function Ii(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",13)(1,"mat-icon",14),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.openEditModal(r))}),t._uU(2,"edit"),t.qZA()()}}function Li(i,o){1&i&&t._UZ(0,"tr",15)}function Ri(i,o){1&i&&t._UZ(0,"tr",16)}let Ni=(()=>{class i{constructor(e,n){this.espcieService=e,this.dialog=n,this.displayedColumns=["id","nombre","actions"],this.dataSource=[],this.filters={}}ngOnDestroy(){this.subscripcion.unsubscribe()}ngOnInit(){this.loadEspecies()}loadEspecies(){try{this.subscripcion=this.espcieService.obtenerEspecies().subscribe({next:e=>{console.log(e),this.dataSource=e},error:e=>{console.log(e),this.dataSource=[]}})}catch{this.dataSource=[]}}applyFilters(){}addNewSpecies(){console.log("Agregar nueva especie"),this.dialog.open(Xt,{width:"350px"}).afterClosed().subscribe(n=>{!0===n&&this.loadEspecies()})}openEditModal(e){this.dialog.open(Xt,{width:"350px",data:{id:e.id,nombre:e.nombre}}).afterClosed().subscribe(s=>{!0===s&&this.loadEspecies()})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(yt),t.Y36(u.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-especies"]],decls:22,vars:4,consts:[["appearance","fill",1,"filter-field"],["matInput","","placeholder","Nombre",3,"ngModel","ngModelChange"],["id","filtro","mat-raised-button","","color","primary",3,"click"],["mat-fab","","color","primary",1,"add-button",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(t.TgZ(0,"div")(1,"mat-form-field",0)(2,"mat-label"),t._uU(3,"Nombre"),t.qZA(),t.TgZ(4,"input",1),t.NdJ("ngModelChange",function(a){return s.filters.name=a}),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return s.applyFilters()}),t._uU(6,"Filtrar"),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(){return s.addNewSpecies()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,Ei,2,0,"th",6),t.YNc(13,Zi,2,1,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,zi,2,0,"th",6),t.YNc(16,Oi,2,1,"td",7),t.BQk(),t.ynx(17,9),t.YNc(18,Di,2,0,"th",6),t.YNc(19,Ii,3,0,"td",7),t.BQk(),t.YNc(20,Li,1,0,"tr",10),t.YNc(21,Ri,1,0,"tr",11),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngModel",s.filters.name),t.xp6(6),t.Q6J("dataSource",s.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},dependencies:[R.Hw,M.lW,M.cs,b.KE,b.hX,z.Nt,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,c.Fj,c.JJ,c.On],styles:[".filter-field[_ngcontent-%COMP%]{margin-right:10px}.mat-form-field[_ngcontent-%COMP%]{height:36px;line-height:normal;padding:0}.mat-input-element[_ngcontent-%COMP%]{padding:0;line-height:normal}button.mat-raised-button[_ngcontent-%COMP%]{height:36px}#filtro[_ngcontent-%COMP%]{margin-left:30px;vertical-align:text-bottom;width:150px}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:999}"]})}return i})();var Ct=p(2395);function Ui(i,o){1&i&&(t.TgZ(0,"h2",4),t._uU(1,"Crear Tipo de Acoplado"),t.qZA())}function Si(i,o){1&i&&(t.TgZ(0,"h2",4),t._uU(1,"Actualizar Tipo de Acoplado"),t.qZA())}let $t=(()=>{class i{constructor(e,n,s){this.dialogRef=e,this.data=n,this.tipoAcopladoService=s,this.tipoAcoplado=n||{id:0,tipo:"",cantidad_ejes:0}}create_or_update(){0===this.tipoAcoplado.id?this.tipoAcopladoService.crear(this.tipoAcoplado).subscribe({next:e=>{f().fire({title:"\xc9xito",text:"Tipo de Acoplado creado con \xe9xito",icon:"success"}),this.dialogRef.close(!0)},error:e=>{console.log(e),f().fire({title:"Error",text:"No se pudo crear el Tipo de Acoplado",icon:"error"})}}):this.tipoAcopladoService.update(this.tipoAcoplado).subscribe({next:e=>{f().fire({title:"\xc9xito",text:"Tipo de Acoplado actualizado con \xe9xito",icon:"success"}),this.dialogRef.close(!0)},error:e=>{console.log(e),f().fire({title:"Error",text:"No se pudo actualizar el Tipo de Acoplado",icon:"error"})}})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(u.so),t.Y36(u.WI),t.Y36(Ct.c))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-modal-tipo-acoplado"]],decls:14,vars:4,consts:[["mat-dialog-title","",4,"ngIf"],["matInput","",3,"ngModel","ngModelChange"],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["mat-dialog-title",""]],template:function(n,s){1&n&&(t.YNc(0,Ui,2,0,"h2",0),t.YNc(1,Si,2,0,"h2",0),t.TgZ(2,"mat-dialog-content")(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Tipo"),t.qZA(),t.TgZ(6,"input",1),t.NdJ("ngModelChange",function(a){return s.tipoAcoplado.tipo=a}),t.qZA()(),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Cantidad de Ejes"),t.qZA(),t.TgZ(10,"input",2),t.NdJ("ngModelChange",function(a){return s.tipoAcoplado.cantidad_ejes=a}),t.qZA()()(),t.TgZ(11,"mat-dialog-actions")(12,"button",3),t.NdJ("click",function(){return s.create_or_update()}),t._uU(13,"Guardar"),t.qZA()()),2&n&&(t.Q6J("ngIf",!s.data),t.xp6(1),t.Q6J("ngIf",s.data),t.xp6(5),t.Q6J("ngModel",s.tipoAcoplado.tipo),t.xp6(4),t.Q6J("ngModel",s.tipoAcoplado.cantidad_ejes))},dependencies:[k.O5,M.lW,u.uh,u.xY,u.H8,b.KE,b.hX,z.Nt,c.Fj,c.wV,c.JJ,c.On]})}return i})();function qi(i,o){1&i&&(t.TgZ(0,"th",13),t._uU(1," ID "),t.qZA())}function Pi(i,o){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function Fi(i,o){1&i&&(t.TgZ(0,"th",13),t._uU(1," Tipo "),t.qZA())}function Bi(i,o){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.tipo," ")}}function Yi(i,o){1&i&&(t.TgZ(0,"th",13),t._uU(1," Cant. Ejes "),t.qZA())}function ji(i,o){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.cantidad_ejes," ")}}function Ji(i,o){1&i&&(t.TgZ(0,"th",13),t._uU(1," Acciones "),t.qZA())}function Vi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",14)(1,"mat-icon",15),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.openEditModal(r))}),t._uU(2,"edit"),t.qZA()()}}function Qi(i,o){1&i&&t._UZ(0,"tr",16)}function Gi(i,o){1&i&&t._UZ(0,"tr",17)}let Hi=(()=>{class i{constructor(e,n){this.tipoAcopladoService=e,this.dialog=n,this.displayedColumns=["id","tipo","cantidad_ejes","actions"],this.dataSource=[],this.filters={}}ngOnDestroy(){this.subscripcion?.unsubscribe()}ngOnInit(){this.loadTipoAcoplados()}loadTipoAcoplados(){try{this.subscripcion=this.tipoAcopladoService.obtenerTipos().subscribe({next:e=>{console.log(e),this.dataSource=e},error:e=>{console.error("Error loading tipos:",e),f().fire({icon:"error",title:"Oops...",text:"No se pudieron cargar los datos!"}),this.dataSource=[]}})}catch(e){console.error("Catch block error:",e),f().fire({icon:"error",title:"Oops...",text:"Ocurri\xf3 un error inesperado!"}),this.dataSource=[]}}openEditModal(e){this.dialog.open($t,{width:"350px",data:{...e}}).afterClosed().subscribe(s=>{!0===s&&this.loadTipoAcoplados()})}add_new_tipo_acoplado(){console.log("Agregar nuevo tipo de acoplado"),this.dialog.open($t,{width:"350px"}).afterClosed().subscribe(n=>{!0===n&&this.loadTipoAcoplados()})}applyFilters(){throw new Error("Method not implemented.")}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(Ct.c),t.Y36(u.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-tipo-acoplado"]],decls:25,vars:4,consts:[["appearance","fill",1,"filter-field"],["matInput","","placeholder","Nombre",3,"ngModel","ngModelChange"],["id","filtro","mat-raised-button","","color","primary",3,"click"],["mat-fab","","color","primary",1,"add-button",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tipo"],["matColumnDef","cantidad_ejes"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(t.TgZ(0,"div")(1,"mat-form-field",0)(2,"mat-label"),t._uU(3,"Nombre"),t.qZA(),t.TgZ(4,"input",1),t.NdJ("ngModelChange",function(a){return s.filters.name=a}),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return s.applyFilters()}),t._uU(6,"Filtrar"),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(){return s.add_new_tipo_acoplado()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,qi,2,0,"th",6),t.YNc(13,Pi,2,1,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,Fi,2,0,"th",6),t.YNc(16,Bi,2,1,"td",7),t.BQk(),t.ynx(17,9),t.YNc(18,Yi,2,0,"th",6),t.YNc(19,ji,2,1,"td",7),t.BQk(),t.ynx(20,10),t.YNc(21,Ji,2,0,"th",6),t.YNc(22,Vi,3,0,"td",7),t.BQk(),t.YNc(23,Qi,1,0,"tr",11),t.YNc(24,Gi,1,0,"tr",12),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngModel",s.filters.name),t.xp6(6),t.Q6J("dataSource",s.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},dependencies:[R.Hw,M.lW,M.cs,b.KE,b.hX,z.Nt,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,c.Fj,c.JJ,c.On],styles:[".filter-field[_ngcontent-%COMP%]{margin-right:10px}.mat-form-field[_ngcontent-%COMP%]{height:36px;line-height:normal;padding:0}.mat-input-element[_ngcontent-%COMP%]{padding:0;line-height:normal}button.mat-raised-button[_ngcontent-%COMP%]{height:36px}#filtro[_ngcontent-%COMP%]{margin-left:30px;vertical-align:text-bottom;width:150px}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:999}"]})}return i})(),vt=(()=>{class i{constructor(e,n){this.http=e,this.Urls=n,this.endpoint="/estado_viajes",this.url=this.Urls.apiUrl}obtenerEstados(){return this.http.get(this.url+this.endpoint)}crear(e){return this.http.post(this.url+this.endpoint,{nombre:e})}update(e){return this.http.put(this.url+this.endpoint+"/"+e.id,e)}static#t=this.\u0275fac=function(n){return new(n||i)(t.LFG(j.eN),t.LFG(it.Y))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Wi(i,o){1&i&&(t.TgZ(0,"h2",3),t._uU(1,"Crear Estado de Viaje"),t.qZA())}function Xi(i,o){1&i&&(t.TgZ(0,"h2",3),t._uU(1,"Actualizar Estado de Viaje"),t.qZA())}let Kt=(()=>{class i{constructor(e,n,s){this.dialogRef=e,this.data=n,this.estadoService=s,this.nombre=n?n.nombre:""}create_or_update(){this.data?this.estadoService.update({id:this.data.id,nombre:this.nombre}).subscribe({next:n=>{f().fire({title:"\xc9xito",text:"Estado de viaje actualizado con \xe9xito",icon:"success"}),this.dialogRef.close(!0)},error:n=>{console.log(n),f().fire({title:"Error",text:"No se pudo acutualizar el estado de viaje",icon:"error"})}}):this.estadoService.crear(this.nombre).subscribe({next:e=>{f().fire({title:"\xc9xito",text:"Especie creada con \xe9xito",icon:"success"}),this.dialogRef.close(!0)},error:e=>{console.log(e),f().fire({title:"Error",text:"No se pudo crear la especie",icon:"error"})}})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(u.so),t.Y36(u.WI),t.Y36(vt))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-modale-estados-viajes"]],decls:10,vars:3,consts:[["mat-dialog-title","",4,"ngIf"],["matInput","",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["mat-dialog-title",""]],template:function(n,s){1&n&&(t.YNc(0,Wi,2,0,"h2",0),t.YNc(1,Xi,2,0,"h2",0),t.TgZ(2,"mat-dialog-content")(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Nombre de Estado"),t.qZA(),t.TgZ(6,"input",1),t.NdJ("ngModelChange",function(a){return s.nombre=a}),t.qZA()()(),t.TgZ(7,"mat-dialog-actions")(8,"button",2),t.NdJ("click",function(){return s.create_or_update()}),t._uU(9,"Guardar"),t.qZA()()),2&n&&(t.Q6J("ngIf",!s.data),t.xp6(1),t.Q6J("ngIf",s.data),t.xp6(5),t.Q6J("ngModel",s.nombre))},dependencies:[k.O5,M.lW,u.uh,u.xY,u.H8,b.KE,b.hX,z.Nt,c.Fj,c.JJ,c.On]})}return i})();function $i(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," ID "),t.qZA())}function Ki(i,o){if(1&i&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function tn(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," Estado "),t.qZA())}function en(i,o){if(1&i&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.nombre," ")}}function nn(i,o){1&i&&(t.TgZ(0,"th",12),t._uU(1," Acciones "),t.qZA())}function on(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",13)(1,"mat-icon",14),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.openEditModal(r))}),t._uU(2,"edit"),t.qZA()()}}function sn(i,o){1&i&&t._UZ(0,"tr",15)}function rn(i,o){1&i&&t._UZ(0,"tr",16)}let an=(()=>{class i{constructor(e,n){this.estadoViajeService=e,this.dialog=n,this.displayedColumns=["id","nombre","actions"],this.dataSource=[],this.filters={}}ngOnDestroy(){this.subscripcion.unsubscribe()}ngOnInit(){this.loadEstados()}loadEstados(){try{this.subscripcion=this.estadoViajeService.obtenerEstados().subscribe({next:e=>{console.log(e),this.dataSource=e},error:e=>{console.log(e),this.dataSource=[]}})}catch{this.dataSource=[]}}applyFilters(){}addNew(){console.log("Agregar nueva especie"),this.dialog.open(Kt,{width:"350px"}).afterClosed().subscribe(n=>{!0===n&&this.loadEstados()})}openEditModal(e){this.dialog.open(Kt,{width:"350px",data:{id:e.id,nombre:e.nombre}}).afterClosed().subscribe(s=>{!0===s&&this.loadEstados()})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(vt),t.Y36(u.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-estado-viajes"]],decls:22,vars:4,consts:[["appearance","fill",1,"filter-field"],["matInput","","placeholder","Nombre",3,"ngModel","ngModelChange"],["id","filtro","mat-raised-button","","color","primary",3,"click"],["mat-fab","","color","primary",1,"add-button",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(t.TgZ(0,"div")(1,"mat-form-field",0)(2,"mat-label"),t._uU(3,"Nombre"),t.qZA(),t.TgZ(4,"input",1),t.NdJ("ngModelChange",function(a){return s.filters.name=a}),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return s.applyFilters()}),t._uU(6,"Filtrar"),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(){return s.addNew()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,$i,2,0,"th",6),t.YNc(13,Ki,2,1,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,tn,2,0,"th",6),t.YNc(16,en,2,1,"td",7),t.BQk(),t.ynx(17,9),t.YNc(18,nn,2,0,"th",6),t.YNc(19,on,3,0,"td",7),t.BQk(),t.YNc(20,sn,1,0,"tr",10),t.YNc(21,rn,1,0,"tr",11),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngModel",s.filters.name),t.xp6(6),t.Q6J("dataSource",s.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},dependencies:[R.Hw,M.lW,M.cs,b.KE,b.hX,z.Nt,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,c.Fj,c.JJ,c.On],styles:[".filter-field[_ngcontent-%COMP%]{margin-right:10px}.mat-form-field[_ngcontent-%COMP%]{height:36px;line-height:normal;padding:0}.mat-input-element[_ngcontent-%COMP%]{padding:0;line-height:normal}button.mat-raised-button[_ngcontent-%COMP%]{height:36px}#filtro[_ngcontent-%COMP%]{margin-left:30px;vertical-align:text-bottom;width:150px}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:999}"]})}return i})();var T=p(2815);let te=(()=>{class i{static#t=this.endpoint="/ubicacion";constructor(e){this.id=0,this.latitud=0,this.longitud=0,this.nombre="",this.ciudad="",this.provincia="",this.direccion="",this.id=e?.id,this.nombre=e?.nombre,this.ciudad=e?.ciudad,this.provincia=e?.provincia,this.direccion=e?.direccion}getText(){return this.nombre+this.direccion}getEndPoint(){return"/api/especies"}}return i})(),cn=(()=>{class i{constructor(e){this.http=e,this.apiUrl="https://maps.googleapis.com/maps/api/geocode/json"}getGeocode(e,n,s){return this.http.get(`${this.apiUrl}?latlng=${e},${n}&key=${s}&enable_address_descriptor=true`)}static#t=this.\u0275fac=function(n){return new(n||i)(t.LFG(j.eN))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var C=p(5619),ln=(p(8645),p(2572),p(4664));p(8180),p(7398),p(9773);const ee=["*"];class E{_clearListeners(){for(const o of this._listeners)o.remove();this._listeners=[]}constructor(o){this._ngZone=o,this._pending=[],this._listeners=[],this._targetStream=new C.X(void 0)}getLazyEmitter(o){return this._targetStream.pipe((0,ln.w)(e=>{const n=new Gt.y(s=>{if(!e)return void this._pending.push({observable:n,observer:s});const r=e.addListener(o,a=>{this._ngZone.run(()=>s.next(a))});if(r)return this._listeners.push(r),()=>r.remove();s.complete()});return n}))}setTarget(o){const e=this._targetStream.value;o!==e&&(e&&(this._clearListeners(),this._pending=[]),this._targetStream.next(o),this._pending.forEach(n=>n.observable.subscribe(n.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}}const J={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"};let w=(()=>{class i{set center(e){this._center=e}set zoom(e){this._zoom=e}set options(e){this._options=e||J}constructor(e,n,s){if(this._elementRef=e,this._ngZone=n,this._eventManager=new E((0,t.f3M)(t.R0b)),this.height="500px",this.width="500px",this._options=J,this.mapInitialized=new t.vpe,this.authFailure=new t.vpe,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=(0,k.NF)(s),this._isBrowser){const r=window;this._existingAuthFailureCallback=r.gm_authFailure,r.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(e){(e.height||e.width)&&this._setSize();const n=this.googleMap;n&&(e.options&&n.setOptions(this._combineOptions()),e.center&&this._center&&n.setCenter(this._center),e.zoom&&null!=this._zoom&&n.setZoom(this._zoom),e.mapTypeId&&this.mapTypeId&&n.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),this._ngZone.runOutsideAngular(()=>{this.googleMap=new google.maps.Map(this._mapEl,this._combineOptions())}),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap))}ngOnDestroy(){this._eventManager.destroy(),this._isBrowser&&(window.gm_authFailure=this._existingAuthFailureCallback)}fitBounds(e,n){this._assertInitialized(),this.googleMap.fitBounds(e,n)}panBy(e,n){this._assertInitialized(),this.googleMap.panBy(e,n)}panTo(e){this._assertInitialized(),this.googleMap.panTo(e)}panToBounds(e,n){this._assertInitialized(),this.googleMap.panToBounds(e,n)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_setSize(){if(this._mapEl){const e=this._mapEl.style;e.height=null===this.height?"":oe(this.height)||"500px",e.width=null===this.width?"":oe(this.width)||"500px"}}_combineOptions(){const e=this._options||{};return{...e,center:this._center||e.center||J.center,zoom:this._zoom??e.zoom??J.zoom,mapTypeId:this.mapTypeId||e.mapTypeId||J.mapTypeId}}_assertInitialized(){}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.Lbi))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[t.TTD],ngContentSelectors:ee,decls:2,vars:0,consts:[[1,"map-container"]],template:function(n,s){1&n&&(t.F$t(),t._UZ(0,"div",0),t.Hsn(1))},encapsulation:2,changeDetection:0})}return i})();const hn=/([A-Za-z%]+)$/;function oe(i){return null==i?"":hn.test(i)?i:`${i}px`}const _n={position:{lat:37.421995,lng:-122.084092}};let Tt=(()=>{class i{set title(e){this._title=e}set position(e){this._position=e}set label(e){this._label=e}set clickable(e){this._clickable=e}set options(e){this._options=e}set icon(e){this._icon=e}set visible(e){this._visible=e}constructor(e,n){this._googleMap=e,this._ngZone=n,this._eventManager=new E((0,t.f3M)(t.R0b)),this.animationChanged=this._eventManager.getLazyEmitter("animation_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.clickableChanged=this._eventManager.getLazyEmitter("clickable_changed"),this.cursorChanged=this._eventManager.getLazyEmitter("cursor_changed"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.draggableChanged=this._eventManager.getLazyEmitter("draggable_changed"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.flatChanged=this._eventManager.getLazyEmitter("flat_changed"),this.iconChanged=this._eventManager.getLazyEmitter("icon_changed"),this.mapMousedown=this._eventManager.getLazyEmitter("mousedown"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.mapMouseup=this._eventManager.getLazyEmitter("mouseup"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.shapeChanged=this._eventManager.getLazyEmitter("shape_changed"),this.titleChanged=this._eventManager.getLazyEmitter("title_changed"),this.visibleChanged=this._eventManager.getLazyEmitter("visible_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed")}ngOnInit(){this._googleMap._isBrowser&&(this._ngZone.runOutsideAngular(()=>{this.marker=new google.maps.Marker(this._combineOptions())}),this._assertInitialized(),this.marker.setMap(this._googleMap.googleMap),this._eventManager.setTarget(this.marker))}ngOnChanges(e){const{marker:n,_title:s,_position:r,_label:a,_clickable:h,_icon:d,_visible:m}=this;n&&(e.options&&n.setOptions(this._combineOptions()),e.title&&void 0!==s&&n.setTitle(s),e.position&&r&&n.setPosition(r),e.label&&void 0!==a&&n.setLabel(a),e.clickable&&void 0!==h&&n.setClickable(h),e.icon&&d&&n.setIcon(d),e.visible&&void 0!==m&&n.setVisible(m))}ngOnDestroy(){this._eventManager.destroy(),this.marker&&this.marker.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_combineOptions(){const e=this._options||_n;return{...e,title:this._title||e.title,position:this._position||e.position,label:this._label||e.label,clickable:this._clickable??e.clickable,map:this._googleMap.googleMap,icon:this._icon||e.icon,visible:this._visible??e.visible}}_assertInitialized(){}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(w),t.Y36(t.R0b))};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged"},exportAs:["mapMarker"],features:[t.TTD]})}return i})(),An=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({})}return i})();function En(i,o){1&i&&(t.TgZ(0,"div",26),t._uU(1," El nombre es obligatorio. "),t.qZA())}function Zn(i,o){1&i&&(t.TgZ(0,"div",26),t._uU(1," La latitud es obligatoria. "),t.qZA())}function zn(i,o){1&i&&(t.TgZ(0,"div",26),t._uU(1," La longitud es obligatoria. "),t.qZA())}function On(i,o){if(1&i&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function Dn(i,o){1&i&&(t.TgZ(0,"div",26),t._uU(1," La ciudad es obligatoria. "),t.qZA())}function In(i,o){1&i&&(t.TgZ(0,"div",26),t._uU(1," La provincia es obligatoria. "),t.qZA())}function Ln(i,o){if(1&i&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function Rn(i,o){1&i&&(t.TgZ(0,"div",26),t._uU(1," La direcci\xf3n es obligatoria. "),t.qZA())}let se=(()=>{class i{constructor(e,n,s,r,a){this.fb=e,this.geocodingService=n,this.crudService=s,this.dialogRef=r,this.data=a,this.center={lat:24.886,lng:-70.268},this.zoom=13,this.height="600px",this.width="600px",this.apiKey="AIzaSyDt6JlDHbP_hgr60wVKfdUdrO21ywD1S10",this.addresses=[],this.customAddress="",this.isAddressEditable=!1,this.markerOptions={icon:"/assets/google_maps_new_logo_icon.png"},this.cities=[],this.form=this.fb.group({nombre:["",c.kI.required],latitud:["",c.kI.required],longitud:["",c.kI.required],ciudad:["",c.kI.required],provincia:["",c.kI.required],direccion:["",c.kI.required]}),this.marker=new google.maps.Marker({position:{lat:24.886,lng:-70.268},label:{color:"red",text:"Seleccionado"},title:"Ubicaci\xf3n Seleccionada",animation:google.maps.Animation.DROP})}ngOnInit(){this.data?(this.form.patchValue(this.data),this.setMarker(this.data.latitud,this.data.longitud),this.center={lat:this.data.latitud,lng:this.data.longitud}):this.getCurrentPosition()}onMapClick(e){if(e.latLng){const n=e.latLng.lat(),s=e.latLng.lng();console.log(`Latitud: ${n}, Longitud: ${s}`),this.setMarker(n,s),this.center={lat:n,lng:s},this.fetchLocationData(n,s)}}getCurrentPosition(){navigator.geolocation.getCurrentPosition(e=>{this.center={lat:e?.coords.latitude??46.788,lng:e?.coords.longitude??-71.3893},this.setMarker(e?.coords.latitude??46.788,e?.coords.longitude??-71.3893),this.fetchLocationData(e?.coords.latitude??46.788,e?.coords.longitude??-71.3893)})}setMarker(e,n){const s={path:"M-1.547 12l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM0 0q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",fillColor:"blue",fillOpacity:.6,strokeWeight:0,rotation:0,scale:2,anchor:new google.maps.Point(0,20)};this.markerOptions={icon:s,draggable:!0,title:"Location",label:"Locxtion",animation:google.maps.Animation.DROP},this.marker=new google.maps.Marker({position:{lat:e,lng:n},label:{text:"Ubicaci\xf3n",fontWeight:"Bold",fontSize:"16px",color:"red"},draggable:!0,title:"Ubicaci\xf3n Seleccionada"})}updateForm(e,n,s,r,a){this.form.setValue({latitud:e,longitud:n,ciudad:s,provincia:r,direccion:a})}fetchLocationData(e,n){this.geocodingService.getGeocode(e,n,this.apiKey).subscribe({next:s=>{if(s.results&&s.results.length>0){const r=s.results[0];this.cities=s.results.map(d=>d.address_components.find(y=>y.types.includes("locality"))?.long_name).filter(d=>void 0!==d),this.form.patchValue({ciudad:this.cities[0]||""});const a=r.address_components.find(d=>d.types.includes("administrative_area_level_1"))?.long_name;this.form.patchValue({provincia:a})}this.addresses=s.results.map(r=>r.formatted_address),this.form.patchValue({latitud:e,longitud:n,direccion:this.addresses[0]}),this.customAddress=this.addresses[0]},error:s=>console.error("Error fetching geocode:",s)})}onAddressChange(){this.customAddress=this.form.get("direccion")?.value,this.isAddressEditable=!0}saveForm(){if(this.form.valid){console.log("Guardando datos:",this.form.value);const{nombre:e,latitud:n,longitud:s,ciudad:r,provincia:a,direccion:h}=this.form.value,d=new te;d.nombre=e,d.latitud=n,d.longitud=s,d.ciudad=r,d.provincia=a,d.direccion=h,this.data&&this.data.id>0?(d.id=this.data.id,this.crudService.update(this.data.id,d).subscribe({next:m=>{this.dialogRef.close(!0)},error:m=>{console.error("Error actualizando ubicaci\xf3n:",m),f().fire("Error","No se pudo actualizar la ubicaci\xf3n","error")}})):this.crudService.create(d).subscribe({next:m=>{console.log("Ubicaci\xf3n creada con \xe9xito:",m),this.dialogRef.close(!0)},error:m=>{console.error("Error creando ubicaci\xf3n:",m),f().fire({title:"Error",text:"Hubo un problema al crear la ubicaci\xf3n.",icon:"error",confirmButtonText:"Entendido"})}})}else console.error("Formulario no es v\xe1lido"),this.markAllAsTouched(),f().fire({title:"Error",text:"Por favor completa todos los campos requeridos.",icon:"error",confirmButtonText:"Entendido"})}closeForm(){console.log("Formulario cerrado"),this.form.reset()}markAllAsTouched(){Object.keys(this.form.controls).forEach(e=>{this.form.get(e)?.markAsTouched({onlySelf:!0})})}onCoordinatesChange(){const e=parseFloat(this.form.get("latitud")?.value),n=parseFloat(this.form.get("longitud")?.value);!isNaN(e)&&!isNaN(n)&&(this.setMarker(e,n),this.center={lat:e,lng:n},this.fetchLocationData(e,n))}selectAll(e){e.target.select()}onMapEndDrag(e){console.log(e),this.setMarker(e.latLng.lat(),e.latLng.lng()),this.center={lat:e.latLng.lat(),lng:e.latLng.lng()},this.fetchLocationData(e.latLng.lat(),e.latLng.lng())}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.qu),t.Y36(cn),t.Y36(T.s),t.Y36(u.so),t.Y36(u.WI))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-ubicacion"]],features:[t._Bn([T.s,{provide:T.G,useValue:{endpoint:"ubicacion"}}])],decls:46,vars:15,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-6","col-12"],["height","600px","width","100%",3,"center","zoom","mapClick"],[3,"position","label","options","title","mapDragend"],[3,"formGroup"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre","autocomplete","off",1,"form-control"],["class","text-danger",4,"ngIf"],["for","latitud",1,"form-label"],["type","number","id","latitud","formControlName","latitud",1,"form-control",3,"change"],["for","longitud",1,"form-label"],["type","number","id","longitud","formControlName","longitud",1,"form-control",3,"change"],["for","ciudad",1,"form-label"],["type","text","id","ciudad","formControlName","ciudad","list","cityList",1,"form-control",3,"click"],["id","cityList"],[4,"ngFor","ngForOf"],["for","provincia",1,"form-label"],["type","text","id","provincia","formControlName","provincia","readonly","",1,"form-control"],["for","direccion",1,"form-label"],["type","text","id","direccion","formControlName","direccion","list","addressList","autocomplete","off",1,"form-control",3,"click"],["id","addressList"],[1,"d-flex","justify-content-start"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-danger"]],template:function(n,s){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"google-map",3),t.NdJ("mapClick",function(a){return s.onMapClick(a)}),t.TgZ(4,"map-marker",4),t.NdJ("mapDragend",function(a){return s.onMapEndDrag(a)}),t.qZA()()(),t.TgZ(5,"div",2)(6,"form",5)(7,"div",6)(8,"label",7),t._uU(9,"Nombre"),t.qZA(),t._UZ(10,"input",8),t.YNc(11,En,2,0,"div",9),t.qZA(),t.TgZ(12,"div",6)(13,"label",10),t._uU(14,"Latitud"),t.qZA(),t.TgZ(15,"input",11),t.NdJ("change",function(){return s.onCoordinatesChange()}),t.qZA(),t.YNc(16,Zn,2,0,"div",9),t.qZA(),t.TgZ(17,"div",6)(18,"label",12),t._uU(19,"Longitud"),t.qZA(),t.TgZ(20,"input",13),t.NdJ("change",function(){return s.onCoordinatesChange()}),t.qZA(),t.YNc(21,zn,2,0,"div",9),t.qZA(),t.TgZ(22,"div",6)(23,"label",14),t._uU(24,"Ciudad"),t.qZA(),t.TgZ(25,"input",15),t.NdJ("click",function(a){return s.selectAll(a)}),t.qZA(),t.TgZ(26,"datalist",16),t.YNc(27,On,2,1,"option",17),t.qZA(),t.YNc(28,Dn,2,0,"div",9),t.qZA(),t.TgZ(29,"div",6)(30,"label",18),t._uU(31,"Provincia"),t.qZA(),t._UZ(32,"input",19),t.YNc(33,In,2,0,"div",9),t.qZA(),t.TgZ(34,"div",6)(35,"label",20),t._uU(36,"Direcci\xf3n"),t.qZA(),t.TgZ(37,"input",21),t.NdJ("click",function(a){return s.selectAll(a)}),t.qZA(),t.TgZ(38,"datalist",22),t.YNc(39,Ln,2,1,"option",17),t.qZA(),t.YNc(40,Rn,2,0,"div",9),t.qZA(),t.TgZ(41,"div",23)(42,"button",24),t.NdJ("click",function(){return s.closeForm()}),t._uU(43,"Cerrar"),t.qZA(),t.TgZ(44,"button",25),t.NdJ("click",function(){return s.saveForm()}),t._uU(45,"Guardar"),t.qZA()()()()()()),2&n){let r,a,h,d,m,y;t.xp6(3),t.Q6J("center",s.center)("zoom",s.zoom),t.xp6(1),t.Q6J("position",s.marker.getPosition())("label",s.marker.getLabel())("options",s.markerOptions)("title",s.marker.getTitle()),t.xp6(2),t.Q6J("formGroup",s.form),t.xp6(5),t.Q6J("ngIf",(null==(r=s.form.get("nombre"))?null:r.touched)&&(null==(r=s.form.get("nombre"))?null:r.hasError("required"))),t.xp6(5),t.Q6J("ngIf",(null==(a=s.form.get("latitud"))?null:a.touched)&&(null==(a=s.form.get("latitud"))?null:a.hasError("required"))),t.xp6(5),t.Q6J("ngIf",(null==(h=s.form.get("longitud"))?null:h.touched)&&(null==(h=s.form.get("longitud"))?null:h.hasError("required"))),t.xp6(6),t.Q6J("ngForOf",s.cities),t.xp6(1),t.Q6J("ngIf",(null==(d=s.form.get("ciudad"))?null:d.touched)&&(null==(d=s.form.get("ciudad"))?null:d.hasError("required"))),t.xp6(5),t.Q6J("ngIf",(null==(m=s.form.get("provincia"))?null:m.touched)&&(null==(m=s.form.get("provincia"))?null:m.hasError("required"))),t.xp6(6),t.Q6J("ngForOf",s.addresses),t.xp6(1),t.Q6J("ngIf",(null==(y=s.form.get("direccion"))?null:y.touched)&&(null==(y=s.form.get("direccion"))?null:y.hasError("required")))}},dependencies:[k.sg,k.O5,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,w,Tt]})}return i})();function Nn(i,o){1&i&&(t.TgZ(0,"th",15),t._uU(1,"ID"),t.qZA())}function Un(i,o){if(1&i&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.id)}}function Sn(i,o){1&i&&(t.TgZ(0,"th",15),t._uU(1,"Nombre"),t.qZA())}function qn(i,o){if(1&i&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.nombre)}}function Pn(i,o){1&i&&(t.TgZ(0,"th",15),t._uU(1,"Provincia"),t.qZA())}function Fn(i,o){if(1&i&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.provincia)}}function Bn(i,o){1&i&&(t.TgZ(0,"th",15),t._uU(1,"Ciudad"),t.qZA())}function Yn(i,o){if(1&i&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.ciudad)}}function jn(i,o){1&i&&(t.TgZ(0,"th",15),t._uU(1,"Direccion"),t.qZA())}function Jn(i,o){if(1&i&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.direccion)}}function Vn(i,o){1&i&&(t.TgZ(0,"th",15),t._uU(1,"Acciones"),t.qZA())}function Qn(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",16)(1,"mat-icon",17),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.openEditModal(r))}),t._uU(2,"edit"),t.qZA()()}}function Gn(i,o){1&i&&t._UZ(0,"tr",18)}function Hn(i,o){1&i&&t._UZ(0,"tr",19)}let Wn=(()=>{class i{constructor(e,n){this.crudService=e,this.dialog=n,this.displayedColumns=["id","nombre","ciudad","provincia","direccion","actions"],this.dataSource=[],this.filterData=[],this.filters=""}ngOnDestroy(){this?.subscripcion.unsubscribe()}ngOnInit(){this.loadData()}loadData(){try{this.subscripcion=this.crudService.getAll().subscribe({next:e=>{console.log(e),this.dataSource=e,this.filterData=this.dataSource},error:e=>{console.log(e)}})}catch(e){console.log(e),this.dataSource=[],this.filterData=[]}}applyFilters(){}addNew(){this.dialog.open(se,{width:"1200px",data:null}).afterClosed().subscribe(n=>{n&&this.loadData()})}openEditModal(e){this.dialog.open(se,{width:"1200px",data:e}).afterClosed().subscribe(s=>{s&&this.loadData()})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(T.s),t.Y36(u.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-listar"]],features:[t._Bn([T.s,{provide:T.G,useValue:{endpoint:"ubicacion"}}])],decls:31,vars:4,consts:[["appearance","fill",1,"filter-field"],["matInput","","placeholder","Nombre",3,"ngModel","ngModelChange"],["id","filtro","mat-raised-button","","color","primary",3,"click"],["mat-fab","","color","primary",1,"add-button",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","provincia"],["matColumnDef","ciudad"],["matColumnDef","direccion"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(t.TgZ(0,"div")(1,"mat-form-field",0)(2,"mat-label"),t._uU(3,"Nombre"),t.qZA(),t.TgZ(4,"input",1),t.NdJ("ngModelChange",function(a){return s.filters=a}),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return s.applyFilters()}),t._uU(6," Filtrar "),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(){return s.addNew()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,Nn,2,0,"th",6),t.YNc(13,Un,2,1,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,Sn,2,0,"th",6),t.YNc(16,qn,2,1,"td",7),t.BQk(),t.ynx(17,9),t.YNc(18,Pn,2,0,"th",6),t.YNc(19,Fn,2,1,"td",7),t.BQk(),t.ynx(20,10),t.YNc(21,Bn,2,0,"th",6),t.YNc(22,Yn,2,1,"td",7),t.BQk(),t.ynx(23,11),t.YNc(24,jn,2,0,"th",6),t.YNc(25,Jn,2,1,"td",7),t.BQk(),t.ynx(26,12),t.YNc(27,Vn,2,0,"th",6),t.YNc(28,Qn,3,0,"td",7),t.BQk(),t.YNc(29,Gn,1,0,"tr",13),t.YNc(30,Hn,1,0,"tr",14),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngModel",s.filters),t.xp6(6),t.Q6J("dataSource",s.filterData),t.xp6(19),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},dependencies:[R.Hw,M.lW,M.cs,b.KE,b.hX,z.Nt,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,c.Fj,c.JJ,c.On],styles:[".filter-field[_ngcontent-%COMP%]{margin-right:10px}.mat-form-field[_ngcontent-%COMP%]{height:36px;line-height:normal;padding:0}.mat-input-element[_ngcontent-%COMP%]{padding:0;line-height:normal}button.mat-raised-button[_ngcontent-%COMP%]{height:36px}#filtro[_ngcontent-%COMP%]{margin-left:30px;vertical-align:text-bottom;width:150px}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:999}"]})}return i})();class Xn{constructor(o){this.id=o.id,this.id_creador=o.id_creador||void 0,this.id_ubicacion_origen=o.idUbicacionOrigen,this.id_ubicacion_destino=o.idUbicacionDestino,this.id_especie=o.idEspecie,this.tipo_tarifa=o.tipoTarifa,this.id_estado=o.idEstado,this.TiposAcoplados=Array.isArray(o.idTipoAcoplado)?o.idTipoAcoplado:[],this.id_camion=o.idCamion||void 0,this.idAcoplado=o.idAcoplado||void 0,this.id_carta_porte=o.idCartaPorte||void 0,this.idChofer=o.idChofer||void 0,this.valor_tarifa=o.valor_tarifa||void 0,this.Chofer=o.chofer||void 0,this.Destino=o.destino||void 0,this.Origen=o.origen||void 0,this.Especie=o.especie||void 0,this.EstadoViaje=o.estadoViaje||void 0,this.cantidad=o.cantidad||void 0}getText(){let o="";return o+=this.Origen?this.Origen.direccion:"",o+=this.Destino?this.Destino.direccion:"",o+=this.Chofer?this.Chofer.nombre:"",o}}function $n(i,o){1&i&&(t.TgZ(0,"th",13),t._uU(1," ID "),t.qZA())}function Kn(i,o){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function to(i,o){1&i&&(t.TgZ(0,"th",13),t._uU(1," Nombre "),t.qZA())}function eo(i,o){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.nombre," ")}}function io(i,o){1&i&&(t.TgZ(0,"th",13),t._uU(1," Ciudad "),t.qZA())}function no(i,o){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.ciudad," ")}}function oo(i,o){1&i&&(t.TgZ(0,"th",13),t._uU(1," Provincia "),t.qZA())}function so(i,o){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.provincia," ")}}function ro(i,o){1&i&&(t.TgZ(0,"th",13),t._uU(1," Direcci\xf3n "),t.qZA())}function ao(i,o){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.direccion," ")}}function co(i,o){1&i&&(t.TgZ(0,"th",13),t._uU(1," Acciones "),t.qZA())}function lo(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",14)(1,"button",15),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.onEntityDoubleClick(r))}),t.TgZ(2,"mat-icon"),t._uU(3,"check_circle"),t.qZA()()()}}function ho(i,o){1&i&&t._UZ(0,"tr",16)}function po(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr",17),t.NdJ("dblclick",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.onEntityDoubleClick(r))}),t.qZA()}}let uo=(()=>{class i{constructor(e,n){this.crudService=e,this.dialogRef=n,this.allUbicaciones=[],this.ubicaciones=[],this.filter="",this.displayedColumns=["id","nombre","ciudad","provincia","direccion","actions"]}ngOnInit(){this.loadUbicaciones()}loadUbicaciones(){this.crudService.getAll().subscribe({next:e=>{this.allUbicaciones=e.map(n=>new te(n)),this.ubicaciones=e},error:e=>console.error("Error fetching ubicaciones:",e)})}onFilterChange(){this.ubicaciones=this.filter?this.allUbicaciones.filter(e=>e.getText().toLowerCase().includes(this.filter.toLowerCase())):this.allUbicaciones}onEntityDoubleClick(e){this.dialogRef.close(e)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(T.s),t.Y36(u.so))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-ubicaciones"]],features:[t._Bn([T.s,{provide:T.G,useValue:{endpoint:"ubicacion"}}])],decls:23,vars:4,consts:[[1,"ubicacion-search-container"],["type","text","placeholder","Buscar ubicaciones...",1,"search-input",3,"ngModel","ngModelChange","input"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","ciudad"],["matColumnDef","provincia"],["matColumnDef","direccion"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"dblclick",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row","",3,"dblclick"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"input",1),t.NdJ("ngModelChange",function(a){return s.filter=a})("input",function(){return s.onFilterChange()}),t.qZA(),t.TgZ(2,"table",2),t.ynx(3,3),t.YNc(4,$n,2,0,"th",4),t.YNc(5,Kn,2,1,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,to,2,0,"th",4),t.YNc(8,eo,2,1,"td",5),t.BQk(),t.ynx(9,7),t.YNc(10,io,2,0,"th",4),t.YNc(11,no,2,1,"td",5),t.BQk(),t.ynx(12,8),t.YNc(13,oo,2,0,"th",4),t.YNc(14,so,2,1,"td",5),t.BQk(),t.ynx(15,9),t.YNc(16,ro,2,0,"th",4),t.YNc(17,ao,2,1,"td",5),t.BQk(),t.ynx(18,10),t.YNc(19,co,2,0,"th",4),t.YNc(20,lo,4,0,"td",5),t.BQk(),t.YNc(21,ho,1,0,"tr",11),t.YNc(22,po,1,0,"tr",12),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("ngModel",s.filter),t.xp6(1),t.Q6J("dataSource",s.ubicaciones),t.xp6(19),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},dependencies:[R.Hw,M.RK,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,c.Fj,c.JJ,c.On],styles:[".ubicacion-search-container[_ngcontent-%COMP%]{margin:20px}.search-input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:20px;box-sizing:border-box}.mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:0 8px 16px #00000026}"]})}return i})();function go(i,o){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function mo(i,o){1&i&&(t.TgZ(0,"div"),t._uU(1," El valor de la tarifa es obligatorio. "),t.qZA())}function fo(i,o){1&i&&(t.TgZ(0,"div"),t._uU(1," El valor de la tarifa no puede ser negativo. "),t.qZA())}function _o(i,o){if(1&i&&(t.TgZ(0,"div",32),t.YNc(1,mo,2,0,"div",33),t.YNc(2,fo,2,0,"div",33),t.qZA()),2&i){const e=t.oxw();let n,s;t.xp6(1),t.Q6J("ngIf",null==(n=e.form.get("valor_tarifa"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(s=e.form.get("valor_tarifa"))||null==s.errors?null:s.errors.min)}}function bo(i,o){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.tipo," ")}}let re=(()=>{class i{constructor(e,n,s,r,a,h,d){this.fb=e,this.crudService=n,this.serviceEspecie=s,this.tipoAcopladoService=r,this.dialog=a,this.dialogRef=h,this.data=d,this.isEditMode=!1,this.ubicacionOrigen=null,this.ubicacionDestino=null,this.especies=[],this.tipoAcoplados=[],this.form=this.fb.group({idUbicacionOrigen:["",c.kI.required],idUbicacionDestino:["",c.kI.required],idEspecie:["",c.kI.required],tipoTarifa:["Por Tonelada",c.kI.required],idEstado:["1",c.kI.required],idTipoAcoplado:[null,c.kI.required],cantidad:[1,[c.kI.required,c.kI.min(1)]],valor_tarifa:[null,[c.kI.required,c.kI.min(0)]]}),this.data&&(this.isEditMode=!0,this.form.patchValue(this.data),this.form.controls.tipoTarifa.setValue(this.data.tipo_tarifa||"Por Tonelada"),this.form.controls.idTipoAcoplado.setValue(this.data.TiposAcoplados||[]))}ngOnInit(){this.cargarEspecies(),this.cargarTiposAcoplados()}saveForm(){if(this.form.valid){const e=this.form.value;this.isEditMode?this.crudService.update(this.data.id,e).subscribe({next:n=>{console.log("Actualizaci\xf3n exitosa",n),this.dialogRef.close(!0)},error:n=>console.error("Error actualizando",n)}):this.crudService.create(e).subscribe({next:n=>{console.log("Creaci\xf3n exitosa",n),this.dialogRef.close(!0)},error:n=>console.error("Error creando",n)})}else console.error("Formulario no es v\xe1lido")}cargarEspecies(){this.serviceEspecie.obtenerEspecies().subscribe({next:e=>{this.especies=e},error:e=>{console.error("Error al cargar las especies:",e)}})}cargarTiposAcoplados(){this.tipoAcopladoService.obtenerTipos().subscribe({next:e=>{this.tipoAcoplados=e},error:e=>{console.error("Error al cargar las especies:",e)}})}openUbicacionModal(e){this.dialog.open(uo,{width:"500px"}).afterClosed().subscribe(s=>{s&&(e?(this.ubicacionOrigen=s,this.form.patchValue({idUbicacionOrigen:s.id})):(this.ubicacionDestino=s,this.form.patchValue({idUbicacionDestino:s.id})))})}closeForm(){this.dialogRef.close()}onSubmit(){if(console.log("Formulario Enviado:",this.form.value),this.form.valid){console.log("Formulario Enviado:",this.form.value);const e=new Xn(this.form.value);this.crudService.create(e).subscribe({next:n=>{console.log("Viaje creado:",n),f().fire({title:"\xc9xito",text:"Viaje creado con \xe9xito",icon:"success"}),this.dialogRef.close(n)},error:n=>{console.error("Error al crear el viaje:",n)}})}else console.log("Formulario no es v\xe1lido"),this.form.markAllAsTouched()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.qu),t.Y36(T.s),t.Y36(yt),t.Y36(Ct.c),t.Y36(u.uw),t.Y36(u.so),t.Y36(u.WI))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-crear-viajes"]],features:[t._Bn([T.s,{provide:T.G,useValue:{endpoint:"viaje_comun"}}])],decls:55,vars:6,consts:[[1,"container","mt-4"],[3,"formGroup","ngSubmit"],[1,"form-header"],[1,"row","mb-3"],[1,"col-12"],["for","origen",1,"form-label"],[1,"input-group"],["type","text","id","origen","readonly","",1,"form-control",3,"value"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["for","destino",1,"form-label"],["type","text","id","destino","readonly","",1,"form-control",3,"value"],[1,"row"],[1,"col-md-4","mb-3"],["for","especie",1,"form-label"],["id","especie","formControlName","idEspecie",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","tipoTarifa",1,"form-label"],["id","tipoTarifa","formControlName","tipoTarifa",1,"form-control"],["value","Por Tonelada","selected",""],["value","Por Kilometro"],["value","Fija"],["for","valorTarifa",1,"form-label"],["type","number","id","valorTarifa","formControlName","valor_tarifa","min","0","step","0.01","placeholder","Ingrese el valor de la tarifa",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","tipoAcoplado",1,"form-label"],["multiple","","id","tipoAcoplado","formControlName","idTipoAcoplado",1,"form-control"],[1,"col-md-4"],["for","cantidad",1,"form-label"],["type","number","id","cantidad","formControlName","cantidad","min","1",1,"form-control"],[1,"col-12","text-center"],["type","submit",1,"btn","btn-primary"],[3,"value"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(n,s){if(1&n&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return s.onSubmit()}),t.TgZ(2,"div",2),t._uU(3," Crear Viaje "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"label",5),t._uU(7,"Origen"),t.qZA(),t.TgZ(8,"div",6),t._UZ(9,"input",7),t.TgZ(10,"button",8),t.NdJ("click",function(){return s.openUbicacionModal(!0)}),t._uU(11," Buscar "),t.qZA()()()(),t.TgZ(12,"div",3)(13,"div",4)(14,"label",9),t._uU(15,"Destino"),t.qZA(),t.TgZ(16,"div",6),t._UZ(17,"input",10),t.TgZ(18,"button",8),t.NdJ("click",function(){return s.openUbicacionModal(!1)}),t._uU(19," Buscar "),t.qZA()()()(),t.TgZ(20,"div",11)(21,"div",12)(22,"label",13),t._uU(23,"Especie"),t.qZA(),t.TgZ(24,"select",14),t.YNc(25,go,2,2,"option",15),t.qZA()(),t.TgZ(26,"div",12)(27,"label",16),t._uU(28,"Tipo de Tarifa"),t.qZA(),t.TgZ(29,"select",17)(30,"option",18),t._uU(31,"Por Tonelada"),t.qZA(),t.TgZ(32,"option",19),t._uU(33,"Por Kilometro"),t.qZA(),t.TgZ(34,"option",20),t._uU(35,"Fija"),t.qZA()()(),t.TgZ(36,"div",12)(37,"label",21),t._uU(38,"Valor de la Tarifa"),t.qZA(),t._UZ(39,"input",22),t.YNc(40,_o,3,2,"div",23),t.qZA()(),t.TgZ(41,"div",3)(42,"div",12)(43,"label",24),t._uU(44,"Tipo de Acoplado"),t.qZA(),t.TgZ(45,"select",25),t.YNc(46,bo,2,2,"option",15),t.qZA()(),t.TgZ(47,"div",26)(48,"label",27),t._uU(49,"Cantidad"),t.qZA(),t._UZ(50,"input",28),t.qZA()(),t.TgZ(51,"div",11)(52,"div",29)(53,"button",30),t._uU(54,"Enviar"),t.qZA()()()()()),2&n){let r;t.xp6(1),t.Q6J("formGroup",s.form),t.xp6(8),t.Q6J("value",(null==s.ubicacionOrigen?null:s.ubicacionOrigen.nombre)||""),t.xp6(8),t.Q6J("value",(null==s.ubicacionDestino?null:s.ubicacionDestino.nombre)||""),t.xp6(8),t.Q6J("ngForOf",s.especies),t.xp6(15),t.Q6J("ngIf",(null==(r=s.form.get("valor_tarifa"))?null:r.touched)&&(null==(r=s.form.get("valor_tarifa"))?null:r.invalid)),t.xp6(6),t.Q6J("ngForOf",s.tipoAcoplados)}},dependencies:[k.sg,k.O5,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.K7,c.JJ,c.JL,c.qQ,c.sg,c.u],styles:[".container[_ngcontent-%COMP%]{padding-left:0;padding-right:0;margin-top:0!important;padding-bottom:0;background-color:#dcdcdc}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#017bff;color:#fff;padding:10px 15px;border-top-left-radius:5px;border-top-right-radius:5px;font-size:20px;margin-bottom:3rem;height:3.5rem}.form-body[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-bottom-left-radius:5px;border-bottom-right-radius:5px;border:1px solid #ccc}.form-control[_ngcontent-%COMP%]{border-radius:0}.row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}"]})}return i})();var yo=p(5758),Co=p(8525),vo=p(3680),Mo=p(1476);function To(i,o){if(1&i&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function wo(i,o){1&i&&(t.TgZ(0,"th",19),t._uU(1,"ID"),t.qZA())}function ko(i,o){if(1&i&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.id)}}function xo(i,o){1&i&&(t.TgZ(0,"th",19),t._uU(1,"Origen"),t.qZA())}function Ao(i,o){if(1&i&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.Origen.direccion)}}function Eo(i,o){1&i&&(t.TgZ(0,"th",19),t._uU(1,"Destino"),t.qZA())}function Zo(i,o){if(1&i&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.Destino.direccion)}}function zo(i,o){1&i&&(t.TgZ(0,"th",19),t._uU(1,"Especie"),t.qZA())}function Oo(i,o){if(1&i&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.Especie.nombre)}}function Do(i,o){1&i&&(t.TgZ(0,"th",19),t._uU(1,"Estado"),t.qZA())}function Io(i,o){if(1&i&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.EstadoViaje.nombre)}}function Lo(i,o){1&i&&(t.TgZ(0,"th",19),t._uU(1,"Acciones"),t.qZA())}function Ro(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",20)(1,"mat-icon",21),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.openEditModal(r))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"i",22),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.sendWhatsApp(r))}),t._uU(4,"whatsapp"),t.qZA()()}}function No(i,o){1&i&&t._UZ(0,"tr",23)}function Uo(i,o){1&i&&t._UZ(0,"tr",24)}const So=[{path:"",component:ri,children:[{path:"transportistas",component:ki},{path:"especies",component:Ni},{path:"tipo-acoplados",component:Hi},{path:"estado-viajes",component:an},{path:"ubicacion",component:Wn},{path:"viajes",component:(()=>{class i{constructor(e,n,s,r){this.crudService=e,this.dialog=n,this.viajeComunService=s,this.estadoViajesService=r,this.displayedColumns=["id","origen","destino","especie","estado","actions"],this.dataSource=[],this.filters="",this.estados=[],this.selectedEstados=[],this.filterData=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.loadEstados(),this.loadData()}ngOnDestroy(){this.subscripcion&&this.subscripcion.unsubscribe()}loadEstados(){this.estadoViajesService.obtenerEstados().subscribe({next:e=>{this.estados=e},error:e=>{console.log(e)}})}loadData(){try{this.subscripcion=this.viajeComunService.listarViajes(this.page,this.pageSize,this.selectedEstados).subscribe({next:e=>{console.log(e),this.dataSource=e.data,this.filterData=this.dataSource,this.total=e.total},error:e=>{console.log(e)}})}catch(e){console.log(e),this.dataSource=[],this.filterData=[]}}pageEvent(e){this.page=e.pageIndex+1,this.pageSize=e.pageSize,this.loadData()}applyFilters(){this.loadData()}addNew(){this.dialog.open(re,{width:"1200px",data:null}).afterClosed().subscribe(n=>{n&&this.loadData()})}openEditModal(e){this.dialog.open(re,{width:"1200px",data:e}).afterClosed().subscribe(s=>{s&&this.loadData()})}sendWhatsApp(e){f().fire({title:"\xbfEst\xe1s seguro?",text:"\xbfQuieres reenviar el mensaje de WhatsApp para este viaje?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, reenviar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.viajeComunService.reenviarMensajes(e.id).subscribe({next:s=>{f().fire("Reenviado","El mensaje de WhatsApp ha sido reenviado exitosamente.","success")},error:s=>{f().fire("Error","Hubo un error al reenviar el mensaje de WhatsApp.","error"),console.error("Error al reenviar mensajes",s)}})})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(T.s),t.Y36(u.uw),t.Y36(yo.Z),t.Y36(vt))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-listar-viajes"]],features:[t._Bn([T.s,{provide:T.G,useValue:{endpoint:"viaje_comun"}}])],decls:37,vars:8,consts:[["appearance","fill",1,"filter-field"],["matInput","","placeholder","Nombre",3,"ngModel","ngModelChange"],["multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","filtro","mat-raised-button","","color","primary",3,"click"],["mat-fab","","color","primary",1,"add-button",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","origen"],["matColumnDef","destino"],["matColumnDef","especie"],["matColumnDef","estado"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","page"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"clickable",3,"click"],[1,"material-icons","clickable",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(t.TgZ(0,"div")(1,"mat-form-field",0)(2,"mat-label"),t._uU(3,"Nombre"),t.qZA(),t.TgZ(4,"input",1),t.NdJ("ngModelChange",function(a){return s.filters=a}),t.qZA()(),t.TgZ(5,"mat-form-field",0)(6,"mat-label"),t._uU(7,"Estado"),t.qZA(),t.TgZ(8,"mat-select",2),t.NdJ("ngModelChange",function(a){return s.selectedEstados=a}),t.YNc(9,To,2,2,"mat-option",3),t.qZA()(),t.TgZ(10,"button",4),t.NdJ("click",function(){return s.applyFilters()}),t._uU(11," Filtrar "),t.qZA(),t.TgZ(12,"button",5),t.NdJ("click",function(){return s.addNew()}),t.TgZ(13,"mat-icon"),t._uU(14,"add"),t.qZA()()(),t.TgZ(15,"table",6),t.ynx(16,7),t.YNc(17,wo,2,0,"th",8),t.YNc(18,ko,2,1,"td",9),t.BQk(),t.ynx(19,10),t.YNc(20,xo,2,0,"th",8),t.YNc(21,Ao,2,1,"td",9),t.BQk(),t.ynx(22,11),t.YNc(23,Eo,2,0,"th",8),t.YNc(24,Zo,2,1,"td",9),t.BQk(),t.ynx(25,12),t.YNc(26,zo,2,0,"th",8),t.YNc(27,Oo,2,1,"td",9),t.BQk(),t.ynx(28,13),t.YNc(29,Do,2,0,"th",8),t.YNc(30,Io,2,1,"td",9),t.BQk(),t.ynx(31,14),t.YNc(32,Lo,2,0,"th",8),t.YNc(33,Ro,5,0,"td",9),t.BQk(),t.YNc(34,No,1,0,"tr",15),t.YNc(35,Uo,1,0,"tr",16),t.qZA(),t.TgZ(36,"mat-paginator",17),t.NdJ("page",function(a){return s.pageEvent(a)}),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngModel",s.filters),t.xp6(4),t.Q6J("ngModel",s.selectedEstados),t.xp6(1),t.Q6J("ngForOf",s.estados),t.xp6(6),t.Q6J("dataSource",s.filterData),t.xp6(19),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(1),t.Q6J("length",s.total)("pageSize",s.pageSize))},dependencies:[k.sg,R.Hw,M.lW,M.cs,b.KE,b.hX,z.Nt,Co.gD,vo.ey,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,Mo.NW,c.Fj,c.JJ,c.On],styles:[".filter-field[_ngcontent-%COMP%]{margin-right:10px}.mat-form-field[_ngcontent-%COMP%]{height:36px;line-height:normal;padding:0}.mat-input-element[_ngcontent-%COMP%]{padding:0;line-height:normal}button.mat-raised-button[_ngcontent-%COMP%]{height:36px}#filtro[_ngcontent-%COMP%]{margin-left:30px;vertical-align:text-bottom;width:150px}.add-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:999}"]})}return i})()}]}];let qo=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[S.Bz.forChild(So),S.Bz]})}return i})();var Po=p(8406);let Fo=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[k.ez,qo,Po.q,c.u5,c.UX,j.JF,An]})}return i})()}}]);